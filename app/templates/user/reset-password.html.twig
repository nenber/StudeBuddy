{% extends 'base.html.twig' %}

{% block title %}Nouveau mot de passe
{% endblock %}

{% block body %}

	<div id="login">
		<div class="row">
			<div class="col-lg-7 col-sm-12">
				<div class="contenu" data-aos="fade-right" data-aos-offset="400">
					<h1>Nouveau mot de passe
						<hr></h1>
					<form class="mt-5" method="POST" action="{{ path('user_change_password',{'email':email ,'token':token}) }}" id="confirmform">
						<div class="form-group row mt-5">
							<p id="messageError" style="color:red;">{{ message }}</p>
							<div class="col-lg-7">


								<label for="exampleInputEmail1">Nouveau mot de passe :</label>
								<input type="password" class="form-control mt-2" id="inputMdp" aria-describedby="emailHelp" placeholder="" name="inputMdp">
								<p class="p-email">
									* Attention : votre mot de passe doit contenir au minimum 6 caractères avec au moins 1 majuscule, 1 minusculte, 1 chiffre et 1 caractère spécial.
								</p>

							</div>

							<div class="col-lg-7" style="margin-top:20px;">


								<label for="exampleInputEmail12">Confirmer nouveau mot de passe :</label>
								<input type="password" class="form-control mt-2" id="inputConfirmMdp" aria-describedby="emailHelp" placeholder="" name="inputConfirmMdp">

							</div>

						</div>

						<button id="confirmReset" class="btn-lg">Valider</button>
					</form>

					<p class="mt-3 d-block d-sm-block d-md-none">
						<a href="{{ path('user_register') }}">Pas encore de compte ?</a>
					</p>

				</div>
			</div>
			<div class="col-lg-5 block-blue d-none d-lg-block d-xl-block">
				<div class="row">
					<div class="col-xl-12">
						<p>
							<a href="{{ path('user_register') }}">Pas encore de compte ?</a>
						</p>
					</div>
				</div>
				<img src="{{ asset('build/images/8576.png') }}" alt="logo studandbuddy" width="180px"/>
			</div>
		</div>
	{% endblock %}
	{% block javascripts %}
		{{ parent() }}
		<script type="text/javascript">
			var niceRegex = false;
$(document).ready(function () {
var emailRegex = new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\$%\^&\*])(?=.{6,})^");


$('#inputMdp').keyup(function () {
console.log($("#inputMdp").val())

if ($("#inputMdp").val().match(emailRegex)) {
console.log("good");
$(".p-email").css("display", "none")
} else {
$(".p-email").css("display", "block")
}
});

/*
$("#confirmReset").click(function () {
if (!$('#inputMdp').val().match(emailRegex)) {
$("#messageError").text("Le nouveau mot de passe ne respect pas le bon format");
} else if ($('#inputMdp').val() != $('#inputConfirmMdp').val()) {


$("#messageError").text("Les deux mots de passe ne correspondent pas");

} else {
$("#messageError").text("");


console.log("test")
$("#confirmform").validate();

}


});
*/

});
		</script>
	{% endblock %}